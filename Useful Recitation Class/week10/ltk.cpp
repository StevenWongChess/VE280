#include "game.h"
#include <iostream>
#include <sstream>
#include <random>
#include <ctime>

using namespace std;

void printWelcome() {
    cout << R"(
                                                                                                      @@@;
                                                                                                     @@@@@
                    #@@@@S                                                                          S@@@@@@
                     @@@@@@@@S                                                                      @@@@@@@
                      @@@@@@@@@@                                                                   #@@@@@@@
                      @@@@@@@@@@@@                   @@@@@                                        @@@@@@@@
                       @@@@@@@@@@@@@                 S@@@@@%                                     @@@@@@@@ @@@;
                        @@@@@@@@@@@@@@;               +@@@@@;                                   @@@@@@@   @@@@@?@@@:
                         @@@@@@@@@@@@@@@               ;@@@@@S@@@@@@@@@@#   #@;        @@@@@+  @@@@@@@    @@@@@@@@@@
                           @@@@@@@@@@@@@@@              +@@@@@@@@@@@@@@@@@@@@@@@@+    @@@@@@@@@@@@@@     @@@@@@@@@@?
                              *@@@@@@@@@@@@@            @@@@@#       @@@@@@@@@@@@@@   @@@@@@@@@@@@@      @@@@@@@@@S  @@
                                     @@@@@@@@@        @@@@@@@@     @@@@@@@@@@@@@@@?  ;@@@@@@@@@@@@@@@   @@@@@@@@@@@@@@@
                       @@:              @@@@@@@   @: @@@  S@@@@  +@@@@@@;   @@@@@    @@@@@@@@@@ @@@@@@@ @@@@@@@@@@@@@@
                       S@@@@@@@? +@@@@@     ?@@@@@@+:@     @@@@*@@@@@ %@@@S  @@@@@   @@@@@@@@  @@@@@@@@@@@@@@@@@@@@@
                        @@@@@@@@@@@@@@@@@       @@@        *@@@@@@    @@@@@@@@@@@@  :@@@@@@    @@@@@@@@@@@  @@@@@@@@
                        :@@@@@@@@@@@@@@@@       @@@        :@@@@%@@@@@@@@@@@@@@@@@@ @@@@@    @@@@@@@@ :@@:     @@@@
                         ;@@@@@@@@@@@@@@@      @@@;       @@@@@@@@@@@@@@@@@@@@@@@@@ @@@    @@@@@@@@@  @@%@@@@@@;@@@
                           @@@@@@@@@@:         @@@      *@@@ @@@@@  @@@@@ @@@@@@@@@:+@   @@@@@@@%@@@*@@@   @@@@@@@@@S
                           +@@@@@             @@@@     @@@ @@@@@@@ @@@@@@     @@@@@+  :@@@@@@@   @@@@ @@@ @@@@@@@@@@@
                          @@@@:              +@@@S   @@@@ @@@%?@@@@@@@*      %@@@@@@@@@@@@@?    @@@@@@@@@@@@@@@@@@@@S
                        @@@@           :@@S  @@@@% @@@@ :@@@@  *@@@@@        @@@@@@@@@@@@@   @@@@@@@@  @@@@@@@@@@@%
                       @@#          @@@@@%   @@@@@@@@@ +@@@@S  *@@@@  #@@    @@@@@@ @@@@*  @@@@@@@@@@   @@@@@@@@@
                     @@@        @@@@@@@       @@@@@@S @@@@@@* %@@@@@@@@@@    @@@@@?  @@#:@@@@@@@@@@@@@@@@@@*@@@S
                   @@@@:     @@@@@@@#         @@@@@@  @@@@@@?@@@@ @@@@@@    @@@@@@   @@@@@@@@@@@@@@@@@@@@@ @@@*
                 #@@@:   ;@@@@@@@@@          ?@@@@@@    @@@@@@@@@@@@@@@:@@ @@@@@@  @@@@@@@@@@ #@@@@@@@@@:S@@@@@
                @@@@  @@@@@@@@@@@@          @@@@@@@@:     ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@%@@@@@@@@@@@@@@@@@@@@
              @@@@@@@@@@@@@@@@@@           @@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  :@@@@@@@@  @@@@@  #@@@@@@@@@;
         ; @@@@@@@@@@@@@@@@@@@            @@@@@@@ @@     @@@@@@@@@@@  ;@@@@@@@@ @@@@@@@@    @@@@@@@  @@@@@     @@@@@@@@@@@@@?
       @@@@@@@@@@@@@@@@@@@@*             @@@@@@@@     @@* @@@@@@@@@  @@@@@@@@   #@@@@@@     @@@@@@@ @@@@@        @@@@@@@@@@@@@@@@:
      @@@@@@@@@@@@@@@@@@@:               @@@@@@@@      @@@@@@@@@@@@@@@@@@@@:     @@@@@+     @@@@@@  @@@@          @@@@@@@@@@@@@@@@@@@+
      ?@@@@@@@@@@@@@@@@@                 @@@@@@@@         @@@@@@@@@@@@@@@:       :@@@@      @@@@@@ ;@@@            %@@@@@@@@@@@@@@@@@@@@
       ;@@@@@@@@@@@@@@@?                 @@@@@@@;            *@@@@@@?                        @@@@   @@+              @@@@@@@@@@@@@@@@@@@
 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 _                               _              __   _   _           _____ _                     _   ___                 _
| |                             | |            / _| | | | |         |_   _| |                   | | / (_)               | |
| |     ___  __ _  ___ _ __   __| |___    ___ | |_  | |_| |__   ___   | | | |__  _ __ ___  ___  | |/ / _ _ __   __ _  __| | ___  _ __ ___  ___
| |    / _ \/ _` |/ _ \ '_ \ / _` / __|  / _ \|  _| | __| '_ \ / _ \  | | | '_ \| '__/ _ \/ _ \ |    \| | '_ \ / _` |/ _` |/ _ \| '_ ` _ \/ __|
| |___|  __/ (_| |  __/ | | | (_| \__ \ | (_) | |   | |_| | | |  __/  | | | | | | | |  __/  __/ | |\  \ | | | | (_| | (_| | (_) | | | | | \__ \
\_____/\___|\__, |\___|_| |_|\__,_|___/  \___/|_|    \__|_| |_|\___|  \_/ |_| |_|_|  \___|\___| \_| \_/_|_| |_|\__, |\__,_|\___/|_| |_| |_|___/
             __/ |                                                                                              __/ |
            |___/                                                                                              |___/

)";
}

int main() {
    srand((unsigned) time(nullptr));
    printWelcome();

    Game *game = getGame();

    cout << "Please enter players' names (\"m\" for Myopic Player). "
            "Players in one camp should separate by \",\". "
            "Different camps should separate by \";\"." << endl;

    Camp camps[] = {RED, GREEN, YELLOW, BLUE};
    size_t count = 0;
    string input;
    string camp;
    string player;

    getline(cin, input);
    input += ";";
    istringstream iss1(input);
    while (getline(iss1, camp, ';')) {
        if (count >= CAMP_SIZE) {
            cout << "Maximum number of camps is 4." << endl;
            return 0;
        }
        camp += ",";
        istringstream iss2(camp);
        while (getline(iss2, player, ',')) {
            game->addPlayer(player, camps[count]);
        }
        count++;
    }

    game->run();

    return 0;
}
